{% extends "postgis_app/base.html" %}
{% load static %}
{% block title %}
    Добавить полигоны
{% endblock %}

{% block content %}
    <div class="d-flex flex-column">
        <div class="d-flex">
            <div class="d-flex flex-column mt-5">
                <div class="d-flex">
                    <h1 class="text-36px-bold">Добавить точки к полигону</h1>
                </div>
                <div class="d-flex flex-row">
                    <div class="flex-column">
                        <div class="flex text-16px-light">Широта</div>
                        <input class="d-flex input_geo_text" name='latitude' id="latitude">
                    </div>
                    <div class="flex-column ms-2">
                        <div class="flex text-16px-light">Долгота</div>
                        <input class="d-flex input_geo_text" name='longitude' id="longitude">
                    </div>
                </div>
                <div class="mt-2 w-100">
                    <button class="button_blue_clearance w-100" onclick="addToString()">Добавить</button>
                </div>
            </div>
        </div>
        <form method="POST">
            {% csrf_token %}
            <div class="d-flex flex-column mt-5">
                <div class="d-flex">
                    <p class="text-36px-bold">Данные для отправки</p>
                </div>
                <div class="flex-column">

                    <div class="flex text-16px-light">Название полигона</div>
                    <input class="d-flex input_geo_text w-100" name='namePolygon' id="namePolygon">
                    <div class="flex text-16px-light mt-2">Координаты полигона</div>
                    <input class="d-flex input_geo_text w-100" disabled name='sendText' id="sendText">
                </div>
                <div class="mt-2 w-100">
                    <button class="button_blue_clearance w-100" type="submit">Отправить</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        let arr = [];

        function addToString() {
            let latitude = $('#latitude').val();
            let longitude = $('#longitude').val();
            console.log('latitude:', latitude, 'longitude:', longitude)
            $('#sendText').val($('#sendText').val() + '(' + latitude + ',' + longitude + ') ');
        }

        $('form').submit(function (e) {
            $(':disabled').each(function (e) {
                $(this).removeAttr('disabled');
            })
        });

    </script>
{% endblock %}